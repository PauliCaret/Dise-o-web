;/*FB_PKG_DELIM*/

__d("useBaseTokenizerSubscriptionDataSourceFetchResolverNetwork",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef,l=b.useState;function a(a){var b=a.dataSource;a=l(!1);var c=a[0],d=a[1],e=k(null);a=i(function(a){var c,f=a.onResolvePayload;a=a.requestParams;(c=e.current)==null?void 0:c.unsubscribe();e.current=b.fetchNetwork(a).subscribe({complete:function(){d(!1)},error:function(a){d(!1)},next:function(a){return f(a)},start:function(a){d(!0)},unsubscribe:function(){d(!1)}})},[b]);j(function(){return function(){var a;(a=e.current)==null?void 0:a.unsubscribe()}},[]);return[{isLoading:c},a]}g["default"]=a}),98);
__d("useBaseTokenizerSubscriptionDataSourceFetchResolver",["cometTypeaheadODSLogFetchNetworkEvent","cr:2557","react","recoverableViolation","useBaseTokenizerSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useCallback,j=e.useEffect,k=e.useRef;function a(a,d){var e=a.dataSource,f=a.dataSourceFetchConfigParams;f=f===void 0?{}:f;var g=f.requestFlow;g=g===void 0?void 0:g;f=f.shouldDebounceNetwork;var h=f===void 0?!0:f,l=a.onResolvePayload;f=c("useBaseTokenizerSubscriptionDataSourceFetchResolverNetwork")({dataSource:e});a=f[0].isLoading;var m=f[1],n=c("useDebouncedComet")(m),o=i(function(a,b){var d=b.isTraceComplete;b=b.source;try{l(a,{isTraceComplete:d,source:b})}catch(a){c("recoverableViolation")("Failed to resolve fetched payload","search")}return b},[l]),p=k(g),q=i(function(a){o(a,{isTraceComplete:!0,source:a.entries.length>0?"network":"network-no-results"}),c("cometTypeaheadODSLogFetchNetworkEvent")&&c("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1),b("cr:2557")&&b("cr:2557")(["all"],a)},[o]);j(function(){function a(a){a=a.requestParams;var b=a.requestFlow;b!=null&&(p.current=b);b={onResolvePayload:q,requestParams:babelHelpers["extends"]({},a,{requestFlow:p.current})};Boolean(h)?n(b):m(b)}d!=null&&a(d)},[m,n,d,q,h]);return[{isLoading:a}]}g["default"]=a}),98);
__d("useBaseTokenizerSubscriptionDataSourceFetch",["react","recoverableViolation","useBaseTokenizerSubscriptionDataSourceFetchResolver"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useState;function a(a){var b=j(null),d=b[0],e=b[1];b=c("useBaseTokenizerSubscriptionDataSourceFetchResolver")(a,d);a=b[0].isLoading;var f=i(function(a,b){b===void 0&&(b="all"),e({requestParams:a,source:b})},[]);b=i(function(a){a=a||{};var b=a.requestFlow;a=a.source;if(d==null){c("recoverableViolation")("Refetch cannot be called with undefined `fetchParams`","search");return}var e=d.requestParams,g=e.loggingEventTrace;e=babelHelpers.objectWithoutPropertiesLoose(e,["loggingEventTrace"]);g=babelHelpers["extends"]({loggingEventTrace:babelHelpers["extends"]({},g,{sequenceID:String(Date.now())}),requestFlow:b},e);f(g,a)},[f,d]);return[{isLoading:a,source:(a=d==null?void 0:d.source)!=null?a:"all"},f,b]}g["default"]=a}),98);
__d("CometInternalTokenizerSubscriptionProvider",["CometInternalTokenizerFetchContext","CometInternalTypeaheadEmptyFetchProvider","react","useBaseTokenizerSubscriptionDataSourceFetch","useCometInternalTypeaheadStateDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo;function a(a){var b=a.children,d=a.dataSource,e=a.dataSourceFetchConfigParams;a.loggingContext;var f=a.onFetchEntries_DO_NOT_USE,g=a.traceProvider;a=c("useCometInternalTypeaheadStateDispatcher")();var h=a.dispatchActiveEntries;a=c("useBaseTokenizerSubscriptionDataSourceFetch")({dataSource:d,dataSourceFetchConfigParams:e,onResolvePayload:j(function(a,b){var c;a=a.entries;var d=b.isTraceComplete;b=b.source;h((c=a)!=null?c:[]);f&&f(a);g&&!g.isResolved()&&(d&&(b==="cache"&&a.length>=g.getEntriesCountForVisualComplete()?g.setEndReason("max_suggestions_reached"):b==="network"?g.setEndReason("all_queries_completed"):b==="network-no-results"&&g.setEndReason("all_queries_completed_no_network_results"),g.resolve()))},[h,f,g])});d=a[0];var l=d.isLoading,m=d.source,n=a[1],o=a[2];e=k(function(){return{fetch:n,isLoading:l,refetch:o,source:m}},[n,l,o,m]);return i.jsx(c("CometInternalTokenizerFetchContext").Provider,{value:e,children:i.jsx(c("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:l,source:m,children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseSubscriptionTokenizer.react",["CometInternalTokenizerSubscriptionProvider","CometInternalTypeaheadStateProvider","CometTokenizerInternal.react","emptyFunction","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useId,k=[];function a(a){var b=a.autoOpen;b=b===void 0?!1:b;var d=a.autoFocus;d=d===void 0?!1:d;var e=a.dataSource,f=a.dataSourceFetchConfigParams,g=a.decorators,h=g===void 0?[]:g;g=a.inputRef;var l=a.emptyEntries_DO_NOT_USE,m=a.id,n=a.isDisabled;n=n===void 0?!1:n;var o=a.label;o=o===void 0?"":o;var p=a.loggingContext,q=a.onAddToken;q=q===void 0?c("emptyFunction"):q;var r=a.onBlur;r=r===void 0?c("emptyFunction"):r;var s=a.onChangeTokens,t=a.onClose;t=t===void 0?c("emptyFunction"):t;var u=a.onEscape;u=u===void 0?c("emptyFunction"):u;var v=a.onFocus;v=v===void 0?c("emptyFunction"):v;var w=a.onOpen;w=w===void 0?c("emptyFunction"):w;var x=a.onRemoveToken;x=x===void 0?c("emptyFunction"):x;var y=a.onSearchCompletion;y=y===void 0?c("emptyFunction"):y;var z=a.placeholder;z=z===void 0?"":z;var A=a.testid;A=A===void 0?"":A;A=a.tokensStrategyRenderer;var B=a.tokens,C=a.viewRole;C=C===void 0?"listbox":C;a=babelHelpers.objectWithoutPropertiesLoose(a,["autoOpen","autoFocus","dataSource","dataSourceFetchConfigParams","decorators","inputRef","emptyEntries_DO_NOT_USE","id","isDisabled","label","loggingContext","onAddToken","onBlur","onChangeTokens","onClose","onEscape","onFocus","onOpen","onRemoveToken","onSearchCompletion","placeholder","testid","tokensStrategyRenderer","tokens","viewRole"]);var D=j(),E=c("useStable")(function(){var a=c("CometTokenizerInternal.react");h.forEach(function(b){var c=b.decorate;b=b.params;a=c(a,b)});return a});o=o||z;return i.jsx(c("CometInternalTypeaheadStateProvider"),{autoOpen:b,emptyEntries_DO_NOT_USE:l,onClose:t,onOpen:w,children:i.jsx(c("CometInternalTokenizerSubscriptionProvider"),{dataSource:e,dataSourceFetchConfigParams:f,loggingContext:p,children:i.jsx(E,babelHelpers["extends"]({},a,{autoFocus:d,commandConfigs:k,id:(b=m)!=null?b:D,inputRef:g,isDisabled:n,label:o,onBackspace:c("emptyFunction"),onBlur:r,onChangeEntries:s,onDownArrow:c("emptyFunction"),onEnter:c("emptyFunction"),onEscape:u,onFocus:v,onHighlightEntry:c("emptyFunction"),onPressEntry:q,onRemoveEntry:x,onSearchCompletion:y,onShiftTab:c("emptyFunction"),onTab:c("emptyFunction"),onUpArrow:c("emptyFunction"),placeholder:z,selectedEntries:B,testid:void 0,tokensStrategyRenderer:A,viewRole:C}))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LsOmnipickerDataSource",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LOCAL:0,SERVER:1,SERVER_DSQ1:2,SERVER_DSQ2:3});c=a;f["default"]=c}),66);
__d("MWChatSearchInputStrategy.react",["fbt","CometScreenReaderText.react","CometTokenizerInputStrategy.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useId,l=b.useMemo,m={inputXStyle:{paddingBottom:"x1a8lsjc",$$css:!0}};e=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var d=l(function(){return{xstyle:m.inputXStyle}},[]),e=k();return j.jsxs(j.Fragment,{children:[j.jsx(c("CometTokenizerInputStrategy.react"),babelHelpers["extends"]({},a,{ariaProps:babelHelpers["extends"]({},a.ariaProps,{"aria-describedby":e}),inputExtraProps:d,ref:b})),j.jsx(c("CometScreenReaderText.react"),{"aria-hidden":!0,id:e,text:h._("__JHASH__NSDogHXzKMm__JHASH__")})]})}a.displayName=a.name+" [from "+f.id+"]";d=e;g["default"]=d}),226);
__d("MWChatSearchTokenizerLightspeedSubscriptionDataSource",["LSIntEnum","MNetRankType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWLSSearchIssueSearchQuerySupportedTypes","mwChatSearchPayloadDecoratorRemoveDuplicates","mwChatSearchPayloadEnumerate","relay-runtime/network/RelayObservable"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=a.database,e=a.excludedIDs;e=e===void 0?[]:e;var f=a.lightspeedSupportedTypes;f=f===void 0?d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:f;var g=a.source;g=g===void 0?c("MWChatSearchSurfaces").universal:g;var i=a.includeRecommendations;i=i===void 0?!0:i;var j=a.dedupeWithOtherUserId;j=j===void 0?!1:j;var k=a.includeGroupSearch;k=k===void 0?!0:k;a=a.nullstateRankType;a=a===void 0?(h||(h=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):a;this.$2=[];this.$3=!1;this.$1=new(c("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:b,excludedIDs:e,includeGroupSearch:k,includeMessageSearchEntry:!1,includeRecommendations:i,lightspeedSupportedTypes:f,nullstateRankType:a,source:g});this.$2=e;this.$3=j}var b=a.prototype;b.fetchNetwork=function(a){var b=this,d=a.selectedTokens;a=babelHelpers.objectWithoutPropertiesLoose(a,["selectedTokens"]);var e=this.$1.fetchNetwork(a);return c("relay-runtime/network/RelayObservable").create(function(a){e.subscribe({complete:a.complete,error:a.error,next:function(e){var f=c("mwChatSearchPayloadDecoratorRemoveDuplicates")(d,b.$3);f=c("mwChatSearchPayloadEnumerate")(f(e));return a.next(babelHelpers["extends"]({},f,{selectedTokens:d}))}})})};b.setExcludedIds=function(a){this.$1.setExcludedIds(a)};return a}();g["default"]=a}),98);
__d("MWChatSearchTypeaheadViewStrategy.react",["CometTypeaheadProgressGlimmer.react","MWChatSearchLightspeedTypeaheadViewList.react","MWJewelSearchTypeaheadViewItem.react","MessengerMSplitFlag","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function a(a){var b=a.ariaProps,d=a.entries,e=a.extraViewProps,f=a.highlightedEntry,g=a.isLoading;a.onAbandonTypeahead_DO_NOT_USE;var h=a.queryString,k=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","queryString"]),l=e==null?void 0:e.getIsViewItemDisabled,m=(a=e==null?void 0:e.hasReachedGroupLimit)!=null?a:!1,n=(a=e==null?void 0:e.hasReachedGxacGroupLimit)!=null?a:!1,o=j(function(a){return m||(l?l(a):!1)||n&&a.rawData.isInstagramAccount},[l,m,n]);a=(e=e==null?void 0:(a=e.selectedEntries)==null?void 0:a.length)!=null?e:0;return i.jsxs(i.Fragment,{children:[g&&i.jsx(c("CometTypeaheadProgressGlimmer.react"),{}),i.jsx(c("MWChatSearchLightspeedTypeaheadViewList.react"),{ariaProps:b,entries:d,highlightedEntry:f,showActionItems:!c("MessengerMSplitFlag").is_msplit_account&&h===""&&a===0,testid:void 0,children:function(a){var b=a.entry,d=a.isActive;a=a.itemRole;return i.createElement(c("MWJewelSearchTypeaheadViewItem.react"),babelHelpers["extends"]({},k,{entry:b,isActive:d,isDisabled:o(b),key:b.key,queryString:h,role:a}))}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("OmnipickerSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("934");b=d("FalcoLoggerInternal").create("omnipicker_search_result_selected",a);e=b;g["default"]=e}),98);
__d("OmnipickerSearchUISectionType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NULL_STATE_SUGGESTED:1,NULL_STATE_XAC_FOLLOWING:2,QUERY_SUGGESTED:3,QUERY_NON_FOLLOWING:4,QUERY_XAC_FOLLOWING:5,QUERY_XAC_NON_FOLLOWING:6,QUERY_BUSINESSES:7,OTHER:8,GROUP_CHATS:9,NULL_STATE_SUGGESTED_DIRECT_INVITE:10,NULL_STATE_CATEGORIES_DIRECT_INVITE:11,QUERY_SUGGESTED_DIRECT_INVITE:12,COMMUNITY_CHATS:13,COMMUNITY_CHATS_SEE_MORE:14,AI:15,AI_SEE_MORE:16,AI_PICKER:17,INVITE_TO_INSTAGRAM:18,INVITE_TO_INSTAGRAM_SEE_MORE:19});c=a;f["default"]=c}),66);
__d("MWOmnipickerLoggingUtils",["I64","MWSearchLogging","OmnipickerSearchResultSelectedFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var c=b.searchSource,d=b.section;b=b.sectionAnalyticsName;return i(a,d,b,c)}function b(a,b){b=b.candidate.chatSearchTypeaheadDataEntry;if(b==null)return 8;b=b.rawData;var c=b.searchSource,d=b.section;b=b.sectionAnalyticsName;return i(a,d,b,c)}function i(a,b,c,e){if(a==="")return 1;if(e!=="server"||b==="")return 3;a=d("MWSearchLogging").SectionAnalyticsNameType.cast(c);if(a==null)return 8;switch(a){case d("MWSearchLogging").SectionAnalyticsNameType.CM_THREADS:return 13;case d("MWSearchLogging").SectionAnalyticsNameType.CONTACTS_GROUPS:return 3;case d("MWSearchLogging").SectionAnalyticsNameType.NON_CONTACTS:return 4;case d("MWSearchLogging").SectionAnalyticsNameType.PAGES:return 7;default:return 8}}var j=function(a){switch(a){case"server":return[2,3];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}},k=function(a){var b;if(a==null)return{final_score:0,raw_score:0,raw_score_index:"-1",request_id:""};var c=a.score;a=a.scoreIndex;return{final_score:(b=c)!=null?b:0,raw_score:(b=c)!=null?b:0,raw_score_index:(c=(h||(h=d("I64"))).to_string(a))!=null?c:"-1",request_id:""}};e=function(a,b,d,e,f,g,h,l,m,n,o,p){var q={query_string:a,result_fbid:e,result_index:((e=g)!=null?e:-1).toString(),result_type:(g=h)!=null?g:7};c("OmnipickerSearchResultSelectedFalcoEvent").log(function(){var e;return{data_sources:j(l),is_epd:c("gkx")("23390")||p,is_interop_thread:!1,mnet_request:k(f),recipient_ids:b,search_mode:1,search_result:q,session_id:(e=d)!=null?e:"",thread_id:null,ui_section:i(a,m,n,l),ui_section_index:((e=o)!=null?e:-1).toString()}})};g.mapSectionToOmnipickerSearchUISection=a;g.mapSectionToOmnipickerSearchUISectionForIG=b;g.getLoggingDataSources=j;g.getMnetRankInfo=k;g.logOmnipickerSearchResultSelectedHelper=e}),98);
__d("OmnipickerSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("928");b=d("FalcoLoggerInternal").create("omnipicker_search_query_changed",a);e=b;g["default"]=e}),98);
__d("OmnipickerSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("929");b=d("FalcoLoggerInternal").create("omnipicker_search_start",a);e=b;g["default"]=e}),98);
__d("MWChatLightSpeedSearchTypeahead.react",["BaseSubscriptionTokenizer.react","MWChatSearchInputStrategy.react","MWChatSearchResultType","MWChatSearchSurfaces","MWChatSearchTokenizerLightspeedSubscriptionDataSource","MWChatSearchTypeaheadViewStrategy.react","MWLSSearchIssueSearchQuerySupportedTypes","MWOmnipickerLoggingUtils","OmnipickerSearchQueryChangedFalcoEvent","OmnipickerSearchResultSelectedFalcoEvent","OmnipickerSearchStartFalcoEvent","emptyFunction","gkx","isArmadillo","isGroupInvitesEnabled","react","useBaseTokenizerDecorators","useCometTokenizerListTokenStrategy","useReStore","uuidv4","withBaseTokenizerEscapeDecorator","withMWChatSearchTokenManagementDecorator"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useMemo,m=b.useRef,n=b.useState;function a(a){var b=a.excludedIDs,e=a.extraLayoutProps,f=a.getIsViewItemDisabled,g=a.includeRecommendations,i=g===void 0?!0:g;g=a.isDisabled;var o=a.isSecure,p=a.layoutStategyRenderer,q=a.onAddToken,r=a.onChangeTokens;a.onOpen;var s=a.onSearchAbandon;s=s===void 0?c("emptyFunction"):s;var t=a.onSearchCompletion;t=t===void 0?c("emptyFunction"):t;a.setAreWeCreatingASecureThread;var u=a.source,v=u===void 0?c("MWChatSearchSurfaces").universal:u;u=a.supportedSearchTypes;var w=u===void 0?d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:u;u=a.tokenItemRenderer;var x=a.tokens;a=a.xstyles;var y=n(""),z=y[0],A=y[1],B=(h||(h=c("useReStore")))(),C=c("gkx")("23390"),D=c("gkx")("24109"),E=null,F=l(function(){return new(c("MWChatSearchTokenizerLightspeedSubscriptionDataSource"))({database:B,dedupeWithOtherUserId:!0,excludedIDs:b,includeRecommendations:i,lightspeedSupportedTypes:w,source:v})},[B,b,i,w,v]);y=c("useBaseTokenizerDecorators")({escapeDecorator:{decorate:c("withBaseTokenizerEscapeDecorator"),params:{onSearchAbandon:s}},tokenManagementDecorator:{decorate:c("withMWChatSearchTokenManagementDecorator"),params:{dataSource:F}}});s=m(null);var G=s.current;k(function(){G&&G.focus()},[G,x]);k(function(){if(o){var a=x.filter(function(a){return a.rawData.resultType===c("MWChatSearchResultType").USER&&a.rawData.isViewerUnconnected===!0});x.length>1&&a.length>0&&c("isGroupInvitesEnabled")()}},[x,o]);k(function(){F.setExcludedIds(b||[])},[F,b]);u=c("useCometTokenizerListTokenStrategy")({tokenItemRenderer:u});var H=l(function(){return{getIsViewItemDisabled:f,selectedEntries:x}},[f,x]),I=function(){if(!D)return;E=c("uuidv4")();c("OmnipickerSearchStartFalcoEvent").log(function(){var a;return{entry_surface:1,is_epd:C,omnipicker_type:1,search_mode:1,session_id:(a=E)!=null?a:""}})},J=function(a){A(a);if(!D)return;E!=null&&c("OmnipickerSearchQueryChangedFalcoEvent").log(function(){var b;return{query_length:a.length.toString(),query_string:a,search_mode:1,session_id:(b=E)!=null?b:""}})},K=function(a){if(q==null)return;if(!D||E==null){q(a);return}var b=a.rawData,e=b.id,f=b.rankingScore,g=b.renderIndex,h=b.searchResultType,i=b.searchSource,j=b.sectionRenderIndex,k={query_string:z,result_fbid:e,result_index:((b=g)!=null?b:-1).toString(),result_type:(e=h)!=null?e:7};c("OmnipickerSearchResultSelectedFalcoEvent").log(function(){var b;return{data_sources:d("MWOmnipickerLoggingUtils").getLoggingDataSources(i),is_epd:C,is_interop_thread:!1,mnet_request:d("MWOmnipickerLoggingUtils").getMnetRankInfo(f),recipient_ids:x.map(function(a){return a.key}),search_mode:1,search_result:k,session_id:(b=E)!=null?b:"",thread_id:null,ui_section:d("MWOmnipickerLoggingUtils").mapSectionToOmnipickerSearchUISection(z,a.rawData),ui_section_index:((b=j)!=null?b:-1).toString()}});q(a)};return j.jsx(c("BaseSubscriptionTokenizer.react"),{autoFocus:!0,dataSource:F,dataSourceFetchConfigParams:c("isArmadillo")()?{requestFlow:"network-upon-approve"}:{},decorators:y,extraLayoutProps:e,extraViewProps:H,inputRef:s,inputStrategyRenderer:c("MWChatSearchInputStrategy.react"),isDisabled:g,layoutStrategyRenderer:p,loggingContext:"messenger_chat",onAddToken:K,onChange:J,onChangeTokens:r,onOpen:I,onSearchCompletion:t,queryString:z,testid:void 0,tokens:x,tokensStrategyRenderer:u,viewStrategyRenderer:c("MWChatSearchTypeaheadViewStrategy.react"),xstyles:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabTokenizerInternalLayoutInlineStrategy.react",["CometScrollableArea.react","CometTokenizerInputStrategyEventListener.react","CometTypeaheadViewStrategyEventListener.react","cometHandleHighlightDropOnMouseLeave","emptyFunction","react","stylex","useCometInternalTypeaheadState","useCometTypeaheadKeyboardForScrollableArea","useCometTypeaheadLayoutStrategyStyles","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={view:{backgroundColor:"x1jx94hy",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0},viewHidden:{pointerEvents:"x47corl",visibility:"xlshs6z",$$css:!0}};function a(a){var b=a.commandConfigs,e=a.extraLayoutProps,f=e.afterViewContent,g=e.ariaProps,i=g.ariaDescribedByProps,l=g.ariaInputProps,m=g.ariaViewProps;g=e.beforeViewContent;var n=e.helperTextComponent,o=e.isAlwaysOpened,p=e.isLoading;e=e.isOpened;var q=a.description,r=a.errorMessage,s=a.inputStrategyRenderer,t=a.inputRef,u=a.isDisabled,v=a.label,w=a.onBackspace,x=a.onBlur,y=a.onChange,z=a.onDownArrow,A=a.onEnter,B=a.onEscape,C=a.onFocus,D=a.onShiftTab,E=a.onTab,F=a.onUpArrow,G=a.queryString,H=a.selectedEntries,I=a.tokensStrategyRenderer,J=a.viewStrategyRenderer,K=a.xstyles;K=K===void 0?{}:K;var L=a.extraViewProps,M=babelHelpers.objectWithoutPropertiesLoose(a,["commandConfigs","extraLayoutProps","description","errorMessage","inputStrategyRenderer","inputRef","isDisabled","label","onBackspace","onBlur","onChange","onDownArrow","onEnter","onEscape","onFocus","onShiftTab","onTab","onUpArrow","queryString","selectedEntries","tokensStrategyRenderer","viewStrategyRenderer","xstyles","extraViewProps"]);a=c("useCometInternalTypeaheadState")();var N=a.activeEntries,O=a.highlightedEntry;a=c("useCometTypeaheadLayoutStrategyStyles")({isOpened:e,xstyles:K});K=a.inputXStyle;var P=a.layoutXStyle,Q=a.viewXStyle_DO_NOT_USE,R=c("useCometTypeaheadKeyboardForScrollableArea")(O),S=c("cometHandleHighlightDropOnMouseLeave")(M.onHighlightEntry);return j.jsxs("div",{className:(h||(h=c("stylex")))(P),children:[j.jsx("div",{className:h(K),onClick:M.onClick,role:"presentation",children:j.jsx(c("CometTokenizerInputStrategyEventListener.react"),{commandConfigs:b,omitEscape:!e,onBackspace:w,onBlur:x,onChange:y,onClick:c("emptyFunction"),onDownArrow:z,onEnter:A,onEscape:B,onFocus:C,onShiftTab:D,onTab:E,onUpArrow:F,ref:t,children:function(a,b){return j.jsx(s,babelHelpers["extends"]({description:q},b,{ariaProps:l,autoFocus:M.autoFocus,errorMessage:r,id:M.id,inputEndContent:M.inputEndContent,inputExtraProps:M.inputExtraProps,inputStartContent:j.jsx(I,{isDisabled:u,onPress:M.onRemoveEntry,tokens:H}),isDisabled:u,label:v,placeholder:H.length>0?null:M.placeholder,queryString:G,ref:d("xplatToDOMRef").xplatToInputRef(a),testid:void 0}))}})}),n!=null&&j.jsx("div",babelHelpers["extends"]({},i,{children:n})),g,(e===!0||o===!0)&&j.jsx(c("CometTypeaheadViewStrategyEventListener.react"),{onOutsideClick:M.onOutsideClick,children:function(a){return j.jsx("div",{className:(h||(h=c("stylex")))([k.view,Q,N.length===0&&!p&&k.viewHidden]),onMouseLeave:S,ref:a,children:j.jsx(c("CometScrollableArea.react"),{horizontal:!1,ref:R,children:j.jsx(J,{ariaProps:m,entries:N,extraViewProps:L,highlightedEntry:O,isLoading:p,onHighlightEntry:M.onHighlightEntry,onPressEntry:M.onPressEntry,queryString:G})})})}}),f]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabTokenizerBaseLayoutInlineStrategy.react",["CometTypeaheadHelperText.react","MWChatTabTokenizerInternalLayoutInlineStrategy.react","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTokenizerFetch","useCometInternalTypeaheadState","useCometTokenizerInternalLayoutInlineStrategyHandlers","useCometTypeaheadInputRefs","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=a.extraLayoutProps;b=b===void 0?{}:b;var d=b.afterViewContent;b=b.beforeViewContent;var e=a.helperText,f=a.inputRef,g=a.label,h=a.onBackspace,k=a.onBlur,l=a.onChange,m=a.onDownArrow,n=a.onEnter,o=a.onEscape,p=a.onHighlightEntry,q=a.onOutsideClick,r=a.onPressEntry,s=a.onRemoveEntry,t=a.onUpArrow,u=a.viewRole,v=a.selectedEntries;a=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","inputRef","label","onBackspace","onBlur","onChange","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onRemoveEntry","onUpArrow","viewRole","selectedEntries"]);var w=c("useCometInternalTokenizerFetch")();w=w.isLoading;var x=c("useCometInternalTypeaheadState")(),y=x.activeEntries;x=x.highlightedEntry;var z=c("useBaseTypeaheadLayoutContextualStrategyStateContext")(),A=z.dispatchIsOpened;j(function(){A(!0)},[A]);z=c("useCometTypeaheadInputRefs")(f);f=z.composedRef;z=z.inputRef;h=c("useCometTokenizerInternalLayoutInlineStrategyHandlers")({handlers:{onBackspace:h,onBlur:k,onChange:l,onDownArrow:m,onEnter:n,onEscape:o,onHighlightEntry:p,onOutsideClick:q,onPressEntry:r,onRemoveEntry:s,onUpArrow:t},inputRef:z,selectedEntries:v});k=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:y,helperText:e,highlightedEntry:x,inputLabel:g,isOpened:!0,viewRole:u});return i.jsx(c("MWChatTabTokenizerInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},a,h,{extraLayoutProps:{afterViewContent:d,ariaProps:k,beforeViewContent:b,helperTextComponent:e!=null?i.jsx(c("CometTypeaheadHelperText.react"),{text:e}):null,isLoading:w,isOpened:!0},inputRef:f,label:g,selectedEntries:v,viewRole:u}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabsTokenizerLayoutInlineStrategy.react",["fbt","MWChatTabTokenizerBaseLayoutInlineStrategy.react","QPLUserFlow","qpl","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo,l={layout:{marginEnd:"xktsk01",marginLeft:null,marginRight:null,overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xi55695",$$css:!0},typeaheadInput:{backgroundColor:"xcrg951",boxSizing:"x9f619",display:"x1lliihq",paddingEnd:"x1sxyh0",paddingLeft:null,paddingRight:null,paddingStart:"xurb0ha",$$css:!0},view:{backgroundColor:"xcrg951",height:"xl6hnh8",maxHeight:"xj8ehma",position:"x10l6tqk",start:"xmh0m78",left:null,right:null,top:"xdsb8wn",width:"xi55695",zIndex:"xhtitgo","@media (min-height: 1280px)_height":"x460g69",$$css:!0}};function a(){function a(a){var b=a.xstyles;b=b===void 0?{}:b;var d=b.viewXStyle_DO_NOT_USE,e=babelHelpers.objectWithoutPropertiesLoose(a,["xstyles"]);b=k(function(){return{inputXStyle:[l.typeaheadInput],layoutXStyle:[l.layout],viewXStyle_DO_NOT_USE:[l.view,d]}},[d]);return j.jsxs("div",{className:"x1n2onr6",children:[j.jsxs("div",{className:"x80vd3b x1q0q8m5 xso031l x78zum5",children:[j.jsx("div",{"aria-hidden":"true",className:"xzsf02u x6prxxf x1fcty0u xvq8zen x1d52u69 x1xmf6yo x1n327nk",children:h._("__JHASH__6UNdxXc7Mre__JHASH__")}),j.jsx(c("MWChatTabTokenizerBaseLayoutInlineStrategy.react"),babelHelpers["extends"]({},e,{contextualProps:{align:"start",disableAutoFlip:!0},label:h._("__JHASH__dp6PXfW93vj__JHASH__"),layerContext:"root",onFocus:function(){e.onFocus(),c("QPLUserFlow").start(c("qpl")._(25312244,"1683"))},onOutsideClick:function(){e.onOutsideClick(),c("QPLUserFlow").endCancel(c("qpl")._(25312244,"1683"))},xstyles:b}))]}),(a=e.extraLayoutProps)==null?void 0:a.footer]})}a.displayName=a.name+" [from "+f.id+"]";return a}g.createMWChatTabsTokenizerLayoutInlineStrategy=a}),226);
__d("MWInboxSecureThreadToggle.react",["MAWSecureThreadToggle.react","MAWThreadCutover","gkx","isTlcSearchEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.areWeCreatingASecureThread,e=a.disabled,f=a.setAreWeCreatingASecureThread;a=a.stretch;a=a===void 0?!1:a;var g=d("MAWThreadCutover").useIsCurrentUserCutoverUser();return!c("gkx")("24120")&&c("isTlcSearchEnabled")()&&g?null:i.jsx(c("MAWSecureThreadToggle.react"),{areWeCreatingASecureThread:b,disabled:e,setAreWeCreatingASecureThread:f,stretch:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInteropTokenUtils",["MWXacGating"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.rawData.isInstagramAccount===!0}function i(a){return a.rawData.isInteropEligible===!0}function j(a){if(d("MWXacGating").isGroupsEnabled())return a.rawData.isGroupsXacEligible===!0;else return!1}function a(a){if(h(a))if(i(a))return!j(a);else return!0;else return!1}g.isInterop=h;g.isInteropEligible=i;g.isGxacEligible=j;g.isInteropWithoutGxacSupport=a}),98);
__d("MWLightSpeedChatTabSuggestedContactItem.react",["fbt","ActorHovercard.react","BaseMiddot.react","FDSFacepilePhoto.react","I64","MAWThreadCutover","MDSListCellPressable.react","MDSTextPairing.react","MWXText.react","react","translatedServerString"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){var b=a.setTokens,e=a.token;a=e.rawData;var f=a.displayName,g=a.id,i=a.imageUrl,l=a.isE2EE,m=a.isInstagramAccount;a=a.subtext;var n=d("MAWThreadCutover").useIsCutoverSecureThread((j||(j=d("I64"))).of_string_opt(g)),o=k.jsx(c("FDSFacepilePhoto.react"),{size:36,sources:[{alt:c("translatedServerString")(f),disabled:!1,source:i}],totalItems:1}),p=null;!n&&l?p=k.jsx(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:h._("__JHASH__PXg4X26-RXS__JHASH__")}):p=m===!0&&a!==""?k.jsxs(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:[a,k.jsx(c("BaseMiddot.react"),{}),"Instagram"]}):void 0;return k.jsx("li",{className:"xurb0ha x1sxyh0",children:k.jsx(c("ActorHovercard.react"),{actorID:g,position:"start",children:function(a){return k.jsx(c("MDSListCellPressable.react"),{addOnStart:o,content:k.jsx(c("MDSTextPairing.react"),{headline:f,level:4,meta:p,reduceEmphasis:!0}),disabled:!1,onPress:function(){return b([e])},ref:a,selected:!1,size:"medium",testid:void 0})}})},g)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWLightSpeedChatTabSuggestedContacts.react",["CometScrollableArea.react","MWCMLightSpeedChatTabActionViewItems.react","MWLightSpeedChatTabSuggestedContactItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={contactsList:{paddingTop:"x1y1aw1k",$$css:!0}};function a(a){var b=a.setTokens;a=a.tokens;return i.jsxs(c("CometScrollableArea.react"),{horizontal:!0,testid:void 0,xstyle:j.contactsList,children:[i.jsx(c("MWCMLightSpeedChatTabActionViewItems.react"),{}),i.jsx("ul",{children:a.map(function(a){return i.jsx(c("MWLightSpeedChatTabSuggestedContactItem.react"),{setTokens:b,token:a},a.key)})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLightSpeedChatTabContactsContainer.react",["CometTransientDialogProvider.react","LSIntEnum","MNetRankType","MWChatSearchFetchContactRecommendations","MWLightSpeedChatTabSuggestedContacts.react","createMWChatSearchTypeaheadDataEntry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useMemo;function a(a){var b=a.isSearchView;a=a.setTokens;var e=d("MWChatSearchFetchContactRecommendations").useChatSearchContactRecommendations((i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)),f=k(function(){return e.map(function(a){a=a[0];return c("createMWChatSearchTypeaheadDataEntry")(a)})},[e]);return b?null:j.jsx(c("CometTransientDialogProvider.react"),{children:j.jsx(c("MWLightSpeedChatTabSuggestedContacts.react"),{setTokens:a,tokens:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposeTabHeader.react",["fbt","MWV2HeaderCloseButton.react","MWV2HeaderContainer.react","MWXText.react","QPLUserFlow","qpl","react","useMWV2CloseTab"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(){return j.jsx("div",{className:"x1sln4lm",children:j.jsx(c("MWXText.react"),{isSemanticHeading:!0,type:"headline4",children:h._("__JHASH__uhF6__U4Uqu__JHASH__")})})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=a.tab;a=a.thread;var d=c("useMWV2CloseTab")(a==null?void 0:a.threadKey,b);return j.jsx(c("MWV2HeaderContainer.react"),{divider:!1,endContent:j.jsx(c("MWV2HeaderCloseButton.react"),{label:h._("__JHASH__1QV0CKBqQm1__JHASH__"),onPress:function(){d(),c("QPLUserFlow").endCancel(c("qpl")._(25312244,"1683"))}}),startContent:j.jsx(k,{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2LockInTabContextProvider.react",["LSAuthorityLevel","LSIntEnum","MWChatStateActions","MWChatStateV2.react","MWChatStateV2Types","MWV2ComposerActionsContext.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useCallback;function l(a){var b=a.tab;a=a.thread;var e=d("MWChatStateV2.react").useDispatch(),f=b.tabId,g=b.tabType;b=a||{};a=b.authorityLevel;var h=b.clientThreadKey,j=b.threadKey,l=b.threadType,m=a!=null?(i||(i=d("LSIntEnum"))).toNumber(a):void 0;return k(function(a){if(g.type!==d("MWChatStateV2Types").MWChatStateTabType.ComposeTab||m==null)return;if(!a&&m===c("LSAuthorityLevel").OPTIMISTIC)return;if(j==null||l==null){c("recoverableViolation")("Unexpected nullish thread in lockInTab","messenger_web_entrypoints");return}e(d("MWChatStateActions").lockInTab(f,{clientThreadKey:h,threadKey:j,threadType:l}))},[m,h,e,f,g.type,j,l])}function a(a){var b=a.children,c=a.tab;a=a.thread;c=l({tab:c,thread:a});return j.jsx(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsListener,{onMessageSendAttempt:c,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2NewThreadUtils",["I64","LSContactBlockedByViewerStatus","LSIntEnum","LSSearchType","MWChatInteraction","MWChatSearchResultType","MWInteropTokenUtils","MWLSDatabaseLazySync","MWPActor.react","MessengerWebEventsFalcoEvent","isE2EEChatWithYourSelfEnabled","promiseDone","react","recoverableViolation","useMWNewChatOpenTabTraceProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react"),l=k.useCallback,m=k.useEffect,n=k.useMemo,o=k.useState,p=c("isE2EEChatWithYourSelfEnabled")();function q(a,b){if(a===c("MWChatSearchResultType").GROUP)return c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"search_click_result",thread_fbid:b}});if(a===c("MWChatSearchResultType").MESSAGE){c("recoverableViolation")("Was not expecting a message search result in a contact search typeahead","messenger_web_search");return}return c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"search_click_result",other_user_fbid:b}})}function a(){var a=d("MWLSDatabaseLazySync").useSync((i||(i=d("LSIntEnum"))).ofNumber(7));m(function(){c("promiseDone")(a())},[a])}var r=[];function b(a,b){var e=o(function(){return a}),f=e[0],g=e[1],h=d("MWPActor.react").useActor();e=n(function(){return[(j||(j=d("I64"))).to_string(h)]},[h]);var i=c("useMWNewChatOpenTabTraceProvider")(),k=l(function(a){return i(function(b){d("MWChatInteraction").set("open_with_tokens",b),g(function(){return a.filter(function(a){if(a.rawData.id!==(j||(j=d("I64"))).to_string(h)||p)return!d("MWInteropTokenUtils").isInteropWithoutGxacSupport(a);else return!1})})},"chatheadsNewMessage")},[i,h]);return[f,k,!p&&(b||f.length>0)?e:r]}function e(a,b){return n(function(){return a.filter(function(a){return!d("MWInteropTokenUtils").isInteropWithoutGxacSupport(a)}).map(function(a){a=a.rawData;var e=a.resultType,f=a.isInstagramAccount===!0,g=a.isContact,h=a.otherUserId;h=h!=null?h:a.id;f?f=g?(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchType").IG_CONTACT_FOLLOWING):(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchType").IG_NONCONTACT_FOLLOWING):e===c("MWChatSearchResultType").USER?f=(i||(i=d("LSIntEnum"))).ofNumber(g?c("LSSearchType").CONTACT:c("LSSearchType").NONCONTACT):e===c("MWChatSearchResultType").PAGE?f=(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchType").PAGE):e===c("MWChatSearchResultType").GROUP?f=(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchType").GROUP):(c("recoverableViolation")("Had troubles converting search result to token.\n              Is Contact: "+(g?"true":"false")+"\n              Token Type: "+e,"messenger_web_search"),f=(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchType").NONCONTACT));g=a.displayName;var k=a.subtext,l=a.verificationStatus;return{blockedByViewerStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contextLine:k,displayName:g,id:(j||(j=d("I64"))).of_string(h),isInteropEligible:a.isInteropEligible,isVerified:l!=null?l!=="NOT_VERIFIED":void 0,profilePicUrl:a.imageUrl,secondaryProfilePicUrl:a.secondaryImageUrl,threadType:e===c("MWChatSearchResultType").USER?b?(i||(i=d("LSIntEnum"))).ofNumber(15):(i||(i=d("LSIntEnum"))).ofNumber(1):e===c("MWChatSearchResultType").GROUP?(i||(i=d("LSIntEnum"))).ofNumber(2):(i||(i=d("LSIntEnum"))).ofNumber(1),type_:f}})},[a,b])}function f(a,b,e,f){var g=d("MWPActor.react").useActor();return l(function(h){var k=h.rawData,l=k.id,m=k.resultType,n=function(a){b(!0);return e({clientThreadKey:void 0,threadKey:(j||(j=d("I64"))).of_string(l),threadType:a})};((k=k.isInstagramAccount)!=null?k:!1)&&f(!1);a||q(m,l);k=d("MWInteropTokenUtils").isInteropWithoutGxacSupport(h);if(m===c("MWChatSearchResultType").USER)if(!p&&(j||(j=d("I64"))).to_string(g)===l||k)return n((i||(i=d("LSIntEnum"))).ofNumber(1));else return;else if(m===c("MWChatSearchResultType").GROUP)return n((i||(i=d("LSIntEnum"))).ofNumber(2));else if(m===c("MWChatSearchResultType").MESSAGE){c("recoverableViolation")("Was not expecting a message search result in a contact search typeahead","messenger_web_product");return}else return n(a?(i||(i=d("LSIntEnum"))).ofNumber(15):(i||(i=d("LSIntEnum"))).ofNumber(1))},[a,b,e,f,g])}g.useSyncRanking=a;g.useTokens=b;g.useTokensShimmed=e;g.useOnAddToken=f}),98);
__d("useLinkNewThreadToInteractionUUID",["I64","Int64Hooks","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){d("Int64Hooks").useEffectInt64(function(){(a==null?void 0:a.threadKey)!=null&&b!=null&&d("MWChatInteraction").set((h||(h=d("I64"))).to_string(a.threadKey),b)},[a==null?void 0:a.threadKey,b])}g["default"]=a}),98);
__d("useMAWMaybeRedirectComposeViewToSecureGroupThread",["MWThreadCreationUtil","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=10;function a(a,b,e,f){i(function(){var g=c("gkx")("5338"),h=b.length>1&&b.length<j;if(b.length===1)return;h||f(!1);if(h&&(g||e)){h=d("MWThreadCreationUtil").checkE2EEligibilityForEachContact(b,a,g);f(h)}},[a,e,f,b])}g["default"]=a}),98);
__d("useMAWMaybeRedirectComposeViewToSecureOneToOneThread",["MWThreadCreationUtil","MaybeTriggerOnDemandCutover","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a,b,e,f){var g=j(!1),h=g[0],k=g[1];i(function(){if(b&&e.length===1){var g=e[0];k(!0);c("promiseDone")(c("MaybeTriggerOnDemandCutover")({isTargetE2E:!1,targetID:g.rawData.id,targetType:"USER"},a).then(function(){var b=d("MWThreadCreationUtil").getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2(g,a).then(function(a){a=a.isSecureThread;f(a)});k(!1);c("promiseDone")(b)}))}},[e,f,a,b]);return{isCutoverInProgress:h}}g["default"]=a}),98);
__d("useMWSearchTypeaheadViewItemIsDisabled",["MWInteropTokenUtils","cr:4831","react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=h||d("react");var i=c.useCallback,j=c.useMemo;function a(a,c){var e=j(function(){return[a.some(d("MWInteropTokenUtils").isInterop),a.some(function(a){return!d("MWInteropTokenUtils").isGxacEligible(a)})]},[a]),f=e[0],g=e[1];e=(e=b("cr:4831")==null?void 0:b("cr:4831")(a,c))!=null?e:[!1,!1];var h=e[0],k=e[1];return i(function(a){var b=d("MWInteropTokenUtils").isInterop(a),e=!d("MWInteropTokenUtils").isGxacEligible(a);a=!d("MWInteropTokenUtils").isInteropEligible(a);if(h||b&&k||b&&c||g&&b||f&&e)return!0;else if(b)return a;else return!1},[f,g,c,h,k])}g["default"]=a}),98);
__d("useMWThreadListNewMessage",["MWInteropTokenUtils","MWThreadListNewMessageState.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=d("MWThreadListNewMessageState.react").useDispatch();i(function(){b({isActive:!0,type:d("MWThreadListNewMessageState.react").MWThreadListNewMessageStateActionType.SetIsActive});return function(){return b({type:d("MWThreadListNewMessageState.react").MWThreadListNewMessageStateActionType.ResetIfEmpty})}},[b]);i(function(){b({entries:a.filter(function(a){return!d("MWInteropTokenUtils").isInteropWithoutGxacSupport(a)}),type:d("MWThreadListNewMessageState.react").MWThreadListNewMessageStateActionType.SetEntries})},[b,a])}g["default"]=a}),98);
__d("MWV2ComposeTab.react",["CometHeroInteractionWithDiv.react","CometPlaceholder.react","CometProgressRingIndeterminate.react","I64","JSResourceForInteraction","LSThreadAttributionStore","MWChatInteraction","MWChatLightSpeedSearchTypeahead.react","MWChatSearchSurfaces","MWChatStateActions","MWChatStateV2.react","MWChatStateV2Types","MWChatTabsTokenizerLayoutInlineStrategy.react","MWChatTemporarySearchResult","MWChatTokenizerTokenStrategy.react","MWInteropTokenUtils","MWLightSpeedChatTabContactsContainer.react","MWOpenAndSecureThreadView.react","MWPNewMessageDraftContext.react","MWPReplyContext.react","MWPThreadThemeProvider.react","MWV2ComposeTabHeader.react","MWV2ComposerHasContentContext.react","MWV2FileDropzone.react","MWV2LockInTabContextProvider.react","MWV2NewThreadUtils","MWV2TabContainer","MWXRelayComposer.react","cr:4185","createMWChatSearchTypeaheadDataEntry","gkx","isTlcSearchEnabled","lazyLoadComponent","react","useLinkNewThreadToInteractionUUID","useMAWMaybeRedirectComposeViewToSecureGroupThread","useMAWMaybeRedirectComposeViewToSecureOneToOneThread","useMWSearchTypeaheadViewItemIsDisabled","useMWThreadListNewMessage","usePrevious","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;var l=e.memo,m=e.useCallback,n=e.useContext,o=e.useEffect,p=e.useMemo,q=e.useState,r=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPThreadPreview.react").__setRef("MWV2ComposeTab.react"));function s(a){var b=a.length,e=c("usePrevious")(b);a=n(d("MWPReplyContext.react").MWPReplyContext);var f=a.clearReply;o(function(){e!=null&&b!==e&&f((j||(j=d("I64"))).zero,!0)},[b,e,f])}var t=c("isTlcSearchEnabled")();function a(a){var e=a.initialTokens,f=a.tab;a=(h||(h=c("useReStore")))();d("MWV2NewThreadUtils").useSyncRanking();var g=q(),i=g[0];g=g[1];var l=f.tabType,n=l.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab?l.secureThreadToggleEnabled:!1;l=q(function(){return n});var u=l[0],v=l[1];l=d("MWChatInteraction").get("open_new");c("useLinkNewThreadToInteractionUUID")(i,l);e=e.map(function(a){return c("createMWChatSearchTypeaheadDataEntry")(d("MWChatTemporarySearchResult").fromContact(void 0,u,a))});e=d("MWV2NewThreadUtils").useTokens(e,u);var w=e[0],x=e[1];e=e[2];var y=d("MWV2NewThreadUtils").useTokensShimmed(w,u);c("useMWThreadListNewMessage")(w);s(w);var z=q(!1),A=z[0],B=z[1],C=d("MWChatStateV2.react").useDispatch();z=function(a){return C(d("MWChatStateActions").lockInTab(f.tabId,a))};z=d("MWV2NewThreadUtils").useOnAddToken(u,B,z,v);var D=m(function(){return B(!0)},[B]),E=p(function(){return d("MWChatTabsTokenizerLayoutInlineStrategy.react").createMWChatTabsTokenizerLayoutInlineStrategy()},[]),F=c("useMWSearchTypeaheadViewItemIsDisabled")(w,u),G=p(function(){return w.some(d("MWInteropTokenUtils").isInterop)},[w]),H=JSON.stringify(i==null?void 0:i.threadKey),I=c("useMAWMaybeRedirectComposeViewToSecureOneToOneThread")(a,t,w,v);I=I.isCutoverInProgress;var J=k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx("div",{className:"x6s0dn4 x78zum5 x1iyjqo2 xl56j7k",children:k.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})}),children:k.jsx(c("MWLightSpeedChatTabContactsContainer.react"),{isSearchView:!1,setTokens:x})}),K=c("gkx")("5338")||c("gkx")("3046"),L=p(function(){return b("cr:4185")==null?null:k.jsx("div",{className:"x7m3og9 x1pi30zi x1swvt13 xyinxu5 x1g2khh7 xjl7jj",children:k.jsx(b("cr:4185"),{areWeCreatingASecureThread:u,disabled:G,setAreWeCreatingASecureThread:v,stretch:!0})})},[u,G]),M=p(function(){return{footer:K?null:L}},[K,L]);D=i!=null?k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:i.themeFbid,children:k.jsx(c("MWXRelayComposer.react"),{afterSendMessage:D,isPreviewThread:!0,threadKey:i.threadKey})})}):null;o(function(){if(i!=null){var a=d("LSThreadAttributionStore").getSourceForNewThread();a!=null&&d("LSThreadAttributionStore").setSource((j||(j=d("I64"))).to_string(i.threadKey),a)}},[H]);H=u?c("MWChatSearchSurfaces").omnipickerArmadillo:c("MWChatSearchSurfaces").omnipicker;c("useMAWMaybeRedirectComposeViewToSecureGroupThread")(a,w,t,v);return k.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"MWV2_CHAT_TAB",interactionUUID:l,pageletName:"ChatTab",children:k.jsx(c("MWPThreadThemeProvider.react"),{children:k.jsx(d("MWPNewMessageDraftContext.react").MWPNewMessageDraftContextProvider,{children:k.jsx(d("MWV2ComposerHasContentContext.react").MWV2ComposerHasContentContextProvider,{children:k.jsx(c("MWV2TabContainer"),{tab:f,threadKey:(a=i==null?void 0:i.threadKey)!=null?a:void 0,children:k.jsxs("div",{className:"x78zum5 xdt5ytf x5yr21d x1ja2u2z",children:[k.jsx(c("MWV2ComposeTabHeader.react"),{tab:f,thread:(l=i)!=null?l:void 0}),k.jsx(d("MWV2FileDropzone.react").MWV2FileDropzone,{isMediaOnly:G,thread:(a=i)!=null?a:void 0,children:k.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x2lwn1j x1n2onr6 x1vjfegm",children:[k.jsx(c("MWChatLightSpeedSearchTypeahead.react"),{excludedIDs:e,extraLayoutProps:M,getIsViewItemDisabled:F,includeRecommendations:!1,isDisabled:A,isSecure:u,layoutStategyRenderer:E,onAddToken:z,onChangeTokens:x,source:H,tokenItemRenderer:c("MWChatTokenizerTokenStrategy.react"),tokens:w}),k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(c("MWV2LockInTabContextProvider.react"),{tab:f,thread:i,children:k.jsx(r,{areWeCreatingASecureThread:u,isCutoverInProgress:I,nullstate:J,renderThreadView:function(a){return k.jsx(c("MWOpenAndSecureThreadView.react"),{thread:a})},setPreviewThread:g,tokens:y,children:D})})})]})})]})})})})})})}a.displayName=a.name+" [from "+f.id+"]";e=l(a);g["default"]=e}),98);
__d("useHasGroupLimitBeenReachedForSearchEntry",["MWGroupLimitConfig","MWInteropTokenUtils","MWXacGating","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b){var c=i(function(){return d("MWXacGating").isGroupsEnabled()&&a.some(d("MWInteropTokenUtils").isInterop)},[a]),e=a.length;c=c?e>=d("MWGroupLimitConfig").gxac-1:b?e>=d("MWGroupLimitConfig").armadillo()-1:e>=d("MWGroupLimitConfig").nonGxac-1;b=d("MWXacGating").isGroupsEnabled()&&e>=d("MWGroupLimitConfig").gxac;return[c,b]}g["default"]=a}),98);